
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Managed Cloud Services and Digital Transformation Provider">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-8.2.7">
    
    
      
        <title>Storage Accounts ðŸ—„ - CloudDots</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.644de097.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#storage-accounts" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CloudDots" class="md-header__button md-logo" aria-label="CloudDots" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CloudDots
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Storage Accounts ðŸ—„
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="red" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69z"/></svg>
            </label>
          
        
      </form>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CloudDots" class="md-nav__button md-logo" aria-label="CloudDots" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    CloudDots
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#blobdiscfile-diff" class="md-nav__link">
    Blob/Disc/File diff
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage-account-types" class="md-nav__link">
    Storage Account types
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sa-access-types" class="md-nav__link">
    SA access types
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#azure-blob" class="md-nav__link">
    Azure blob
  </a>
  
    <nav class="md-nav" aria-label="Azure blob">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#types-of-blobs" class="md-nav__link">
    Types of blobs
  </a>
  
    <nav class="md-nav" aria-label="Types of blobs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#block" class="md-nav__link">
    Block
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#append-blobs" class="md-nav__link">
    Append blobs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#page-blob" class="md-nav__link">
    Page blob
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#containerblob-visibility" class="md-nav__link">
    Container/blob visibility
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage-lifecycle" class="md-nav__link">
    Storage Lifecycle
  </a>
  
    <nav class="md-nav" aria-label="Storage Lifecycle">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#blob-access-tiers" class="md-nav__link">
    Blob Access Tiers
  </a>
  
    <nav class="md-nav" aria-label="Blob Access Tiers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hot-online" class="md-nav__link">
    Hot (Online)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cool-online" class="md-nav__link">
    Cool (Online)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#archive-offline" class="md-nav__link">
    Archive (Offline)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tiering-policy" class="md-nav__link">
    Tiering Policy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#object-replication" class="md-nav__link">
    Object replication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#immutable-blob-worm" class="md-nav__link">
    Immutable blob (WORM)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encryption-scopes" class="md-nav__link">
    Encryption scopes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#azure-file" class="md-nav__link">
    Azure File
  </a>
  
    <nav class="md-nav" aria-label="Azure File">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#azure-file-share" class="md-nav__link">
    Azure File Share
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#azure-file-sync" class="md-nav__link">
    Azure File Sync
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-share-steps" class="md-nav__link">
    File Share steps
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage-security" class="md-nav__link">
    Storage Security
  </a>
  
    <nav class="md-nav" aria-label="Storage Security">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#authorization-options" class="md-nav__link">
    Authorization options
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#azcopy" class="md-nav__link">
    AzCopy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-domain-configuration" class="md-nav__link">
    Custom Domain Configuration
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="storage-accounts">Storage Accounts ðŸ—„<a class="headerlink" href="#storage-accounts" title="Permanent link">&para;</a></h1>
<p>Data objects in Azure Storage are accessible from anywhere in the world over HTTP or HTTPS via a REST API.The Azure Storage platform includes the following data services:</p>
<ul>
<li><strong>Azure Blobs</strong>: A massively scalable <code>object store</code>. Also includes support for big data analytics through Data Lake Storage Gen2.</li>
<li><strong>Azure Files</strong>: Cloud based file sharing service.This file share can be mounted to multiple VMs or on-premises machines, which is ideal for sharing files across machines.</li>
<li><strong>Azure Queues</strong>:  Allows for <code>asynchronous message queueing</code> between application components.Messages can be stored and retrieved using queues. These stored messages can be up to <em>64 KB</em> in size and can be accessed from anywhere in the world over <code>HTTP</code> or <code>HTTPS</code>.</li>
<li><strong>Azure Tables</strong>: A <code>NoSQL store</code> for schemaless storage of semi-structured data. Tables is a <code>NoSQL datastore</code> that is now part of <code>Azure Cosmos DB</code>. Besides the Table Storage, Cosmos DB offers a new Table API with additional features such as turnkey failover, global distribution, automatic secondary indexes, and throughput optimized tables.</li>
<li><strong>Azure Disk</strong>: Azure Disks provides persistent storage to Azure Vm, Azure VMSS etc.</li>
</ul>
<p><center> <img src="../images/storageacc.jpg" width="80%"> </center></p>
<div class="admonition tip">
<p class="admonition-title">Naming in Storage accounts</p>
<p>The name for the storage account is unique across Azure. Each object stored in the storage account is represented using a <code>unique URL</code>. During the creation of the storage account, you need to pass the name of the storage account to the Azure Resource Manager. Using this storage account name, endpoints are created.</p>
<p>For example, if the name of your storage account is <code>amar_blog_storage</code>, then the default endpoints will be as follows:</p>
<ul>
<li>Blobs <a href="https://amar_blog_storage.blob.core.windows.net">https://amar_blog_storage.blob.core.windows.net</a></li>
<li>Tables <a href="https://amar_blog_storage.table.core.windows.net">https://amar_blog_storage.table.core.windows.net</a></li>
<li>Files <a href="https://amar_blog_storage.file.core.windows.net">https://amar_blog_storage.file.core.windows.net</a></li>
<li>Queues <a href="https://amar_blog_storage.queue.core.windows.net">https://amar_blog_storage.queue.core.windows.net</a></li>
</ul>
</div>
<hr />
<div class="admonition question">
<p class="admonition-title">Things to consider when architecting?</p>
<p>These are things to consider for Azure blob store when doing architecture</p>
<div class="highlight"><pre><span></span><code>    - Account type: v1 or v2
    - Performance tier: standard or performance
    - Replication: LRS, ZRS, ZLRS, GRS
    - Access Tier: Hold, cold or archived.
</code></pre></div>
</div>
<h2 id="blobdiscfile-diff">Blob/Disc/File diff<a class="headerlink" href="#blobdiscfile-diff" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p><code>Azure File Storage</code> may be mounted as an SMB volume (so that all instances of your app can work with it). Note: This is not something readily supported with Web Apps currently - you'd only be able to write to the file share via API, not via attached disk. Azure File Storage volumes support up to 5TB each, and throughput is max. 60MB/sec across the share. It's backed by Azure blob storage (so, just as durable as blobs).</p>
</li>
<li>
<p><code>Azure Disks</code> are again blob-backed (page blobs), up to 1TB each. Each disk is mountable to a single VM. Throughput is higher than File Storage. Cannot be shared across VMs without your own solution to sync data. Once mounted and formatted, accessible just like any other local file (e.g. no modifications to your app)</p>
</li>
<li>
<p><code>Azure blobs</code>: they can be accessed via REST API/SDK and are not mountable as a disk/drive. Without modifying your app, you'd need to make sure blob contents were copied to local disk to perform operations on the content (you can't just open a blob as a file and modify it).</p>
</li>
</ul>
<h2 id="storage-account-types">Storage Account types<a class="headerlink" href="#storage-account-types" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>General-Purpose v2</strong>: This is recommended for most cases. This storage account type provides the blob, file, queue and table service. <code>General-purpose v2 accounts</code> deliver the <mark>lowest per-gigabyte capacity prices</mark> for Azure Storage, as well as industry-competitive transaction prices.</li>
<li><strong>General-purpose v1</strong>: this also provides the blob, file, queue and table service but is older version of this account type. General Purpose v1 (GPv1) accounts do not support tiering.</li>
<li><strong>BlockBlobStorage</strong> : this is specifically when you want premium performance for storing block or appending blobs </li>
<li><strong>FileStorage</strong> : This is specifically when you want premium performance for file-ONLY storage </li>
<li><strong>BlobStorage</strong> : This is legacy storage account. Use General-purpose v2 account as much as possible.</li>
</ul>
<h2 id="sa-access-types">SA access types<a class="headerlink" href="#sa-access-types" title="Permanent link">&para;</a></h2>
<ol>
<li><code>Access keys</code>: These are not preferred as you give whole access.<ol>
<li>They provide unlimited access </li>
<li>They are auto generated</li>
</ol>
</li>
<li><code>Identity based</code>: Using on-prem AD or Azure AD. They use RBAC instead of keys. </li>
<li><code>SAS tokens</code>: We can provide more granular level details such as access level, dates and IP values.</li>
</ol>
<h2 id="azure-blob">Azure blob<a class="headerlink" href="#azure-blob" title="Permanent link">&para;</a></h2>
<p>As Azure Blob Storage is for unstructured data, you can store any type of text or binary data. Blob storage is also referred to as object storage</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><code>$logs</code> is the system container that you should not mess with</p>
</div>
<p>Blob structure is shown below</p>
<p><center> <img src="../images/blob_structure.jpg" width="80%"> </center></p>
<p>Blob Storage comprises three resources.</p>
<ul>
<li><code>Storage account</code>: Used to provide complete access. They are not recommended and should be stored in <code>Key Vault</code>.</li>
<li><code>Container</code> in the storage account</li>
<li><code>Blobs/objects</code> stored in the container</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Default access</p>
<p>When you create a container, you need to provide the <code>public access level</code>, which specifies whether you want to expose the data stored in the container publicly. By default, the contents are <code>private</code></p>
</div>
<h3 id="types-of-blobs">Types of blobs<a class="headerlink" href="#types-of-blobs" title="Permanent link">&para;</a></h3>
<h4 id="block">Block<a class="headerlink" href="#block" title="Permanent link">&para;</a></h4>
<p>For audio and video files</p>
<h4 id="append-blobs">Append blobs<a class="headerlink" href="#append-blobs" title="Permanent link">&para;</a></h4>
<p>For log files</p>
<h4 id="page-blob">Page blob<a class="headerlink" href="#page-blob" title="Permanent link">&para;</a></h4>
<p>Used as VM disks</p>
<h3 id="containerblob-visibility">Container/blob visibility<a class="headerlink" href="#containerblob-visibility" title="Permanent link">&para;</a></h3>
<p>We have the following options to control the visibility of container/blob:</p>
<ul>
<li><strong>Private</strong>: This is the default option; no anonymous access is allowed to <code>containers
and blobs</code>.</li>
<li><strong>Blob (public)</strong>: This will grant anonymous public read access to the <code>blobs alone</code>.</li>
<li><strong>Container (public)</strong>: This will grant anonymous public read and list access to the <code>container and all the blobs stored inside the container</code>.</li>
</ul>
<h3 id="storage-lifecycle">Storage Lifecycle<a class="headerlink" href="#storage-lifecycle" title="Permanent link">&para;</a></h3>
<h4 id="blob-access-tiers">Blob Access Tiers<a class="headerlink" href="#blob-access-tiers" title="Permanent link">&para;</a></h4>
<p>The access tiers are defined based on the usage pattern or frequency of access. <mark>When you create a file, it will be accessed frequently; gradually the frequency of access will reduce, and eventually you will not be accessing the file. However, you would still like to keep the file because of the data retention policies and for auditing purposes</mark>. Choosing the right access tier will help you optimize the cost of data storage and data access.</p>
<h5 id="hot-online">Hot (Online)<a class="headerlink" href="#hot-online" title="Permanent link">&para;</a></h5>
<p>Optimized for frequent access of objects. From a cost perspective, accessing data in the Hot tier is the least expensive compared to the other tiers; however, the data storage costs are higher.<mark>When you create a new storage account, this is the default tier.</mark></p>
<h5 id="cool-online">Cool (Online)<a class="headerlink" href="#cool-online" title="Permanent link">&para;</a></h5>
<p>Optimized for storing data that is not accessed very frequently and is stored for at least 30 days. <mark>Storing data in the Cool tier is cheaper than the Hot tier; however, accessing data in the Cool tier is more expensive than Hot tier.</mark></p>
<h5 id="archive-offline">Archive (Offline)<a class="headerlink" href="#archive-offline" title="Permanent link">&para;</a></h5>
<p>Optimized for storing data that can tolerate hours of retrieval latency and will remain in the Archive tier for at least 180 days. When it comes to storing data, the Archive tier is the most cost-effective tier.</p>
<div class="admonition question">
<p class="admonition-title">How to access data from Archive tier?</p>
<p>While a blob is in the archive tier, it can't be read or modified. To read or download a blob in the archive tier, you must first <code>rehydrate</code> it to an online tier, either hot or cool. Data in the archive tier can take up to 15 hours to rehydrate, depending on the priority you specify for the <code>rehydration operation</code>.</p>
</div>
<p>Only storage accounts that are configured for LRS, GRS, or RA-GRS support moving blobs to the archive tier. The archive tier isn't supported for ZRS, GZRS, or RA-GZRS accounts.</p>
<p><center> <img src="../images/lifecycle_policy.jpg" width="80%"> </center></p>
<div class="admonition error">
<p class="admonition-title">Be careful while choosing access tier</p>
<p>If you are setting up the access tier from the storage account level, you will have only two choices: <code>Hot</code> and <code>Cool</code>. This access tier will be inherited by all objects stored in the storage account. <mark>The <code>Archive tier</code> can be set at the individual object level only.</mark></p>
</div>
<h3 id="tiering-policy">Tiering Policy<a class="headerlink" href="#tiering-policy" title="Permanent link">&para;</a></h3>
<p>Azure Storage lifecycle management offers a rule-based policy that you can use to transition blob data to the appropriate access tiers or to expire data at the end of the data lifecycle.</p>
<div class="admonition warning">
<p class="admonition-title">More than 1 policy on same blob</p>
<p>If you define more than one action on the same blob, lifecycle management applies the <code>least expensive</code> action to the blob. For example, action <code>delete</code> is cheaper than action <code>tierToArchive</code>. Action <code>tierToArchive</code> is cheaper than action <code>tierToCool</code>.</p>
</div>
<h3 id="object-replication">Object replication<a class="headerlink" href="#object-replication" title="Permanent link">&para;</a></h3>
<p>Object replication asynchronously copies block blobs in a container according to rules that you configure. The contents of the blob, any versions associated with the blob, and the blob's metadata and properties are all copied from the source container to the destination container.</p>
<div class="admonition tip">
<p class="admonition-title">Requirements for replication</p>
<p>Object replication requires that the following <code>Azure Storage features</code> to be enabled:</p>
<ul>
<li><strong>Change feed</strong>: Must be enabled on the source account.</li>
<li><strong>Blob versioning</strong>: Must be enabled on both the source and destination accounts. </li>
</ul>
<p><center> <img src="../images/blob_options.jpg" width="80%"> </center></p>
<p>The replicaiton process between 2 SA's is shown below</p>
<p><center> <img src="../images/object_replication.jpg" width="80%"> </center></p>
</div>
<h3 id="immutable-blob-worm">Immutable blob (WORM)<a class="headerlink" href="#immutable-blob-worm" title="Permanent link">&para;</a></h3>
<p>Immutable storage for Azure Blob Storage enables users to store business-critical data in a <code>WORM (Write Once, Read Many)</code> state. While in a WORM state, data cannot be modified or deleted for a user-specified interval. By configuring immutability policies for blob data, you can protect your data from overwrites and deletes.</p>
<p><code>Immutable storage</code> for Azure Blob Storage supports 2 types of immutability policies:</p>
<ul>
<li><strong>Time-based retention policies</strong>: With a time-based retention policy, users can set policies to store data for a specified interval. When a time-based retention policy is set, objects can be created and read, <mark>but not modified or deleted</mark>. <em>After the retention period has expired, objects can be deleted but not overwritten.</em>  </li>
<li><strong>Legal hold policies</strong>: A legal hold stores immutable data until the legal hold is explicitly cleared. When a legal hold is set, objects can be created and read, but not modified or deleted. </li>
</ul>
<h3 id="encryption-scopes">Encryption scopes<a class="headerlink" href="#encryption-scopes" title="Permanent link">&para;</a></h3>
<p>Encryption scopes enable you to manage encryption with a key that is scoped to a container or an individual blob. You can use encryption scopes to create secure boundaries between data that resides in the same storage account but belongs to different customers.</p>
<div class="admonition tip">
<p class="admonition-title">How encryption scopes work?</p>
<p>By default, a storage account is encrypted with a key that is scoped to the <code>entire storage account</code>. When you define an encryption scope, you specify a key that may be <code>scoped to a container or an individual blob</code>.</p>
<p>When the encryption scope is applied to a blob, the blob is encrypted with that key. When the encryption scope is applied to a container, it serves as the default scope for blobs in that container, so that all blobs that are uploaded to that container may be encrypted with the same key.</p>
</div>
<h2 id="azure-file">Azure File<a class="headerlink" href="#azure-file" title="Permanent link">&para;</a></h2>
<p><center> <img src="../images/file_structure.jpg" width="80%"> </center></p>
<p>It has hierarchical file structure</p>
<div class="highlight"><span class="filename">Generic file share structure</span><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="err">##</span><span class="w"> </span><span class="nx">Generic</span><span class="w"> </span><span class="nx">structure</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="p">&lt;</span><span class="nx">storageAccountName</span><span class="p">&gt;.</span><span class="nx">file</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">windows</span><span class="p">.</span><span class="nx">net</span><span class="err">\</span><span class="p">&lt;</span><span class="nx">fileShareName</span><span class="p">&gt;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="err">#</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">storageAccountName</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">amarTestStorage</span><span class="w"> </span><span class="nx">and</span><span class="w"> </span><span class="nx">fileShareName</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">dataFile01</span><span class="p">,</span><span class="w"> </span><span class="nx">then</span><span class="w"> </span><span class="nx">URI</span><span class="w"> </span><span class="nx">is</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="nx">amarTestStorage</span><span class="p">.</span><span class="nx">file</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">windows</span><span class="p">.</span><span class="nx">net</span><span class="err">\</span><span class="nx">dataFile01</span>
</code></pre></div>
<div class="admonition question">
<p class="admonition-title">Difference between Azure File and Azure Blob?</p>
</div>
<ul>
<li>Azure Blobs uses a <code>flat namespace</code> that includes containers and objects. Azure Files uses <code>directory objects</code> as you have seen with our traditional file shares.</li>
<li>Azure Blobs is <code>accessed via containers</code>, and Azure Files is <code>accessed through file shares</code>.</li>
<li>Azure Blobs is accessed via an HTTP/HTTPS connection, and Azure Files is <code>accessed via the SMB/NFS protocol</code> when mounted to a virtual machine.</li>
<li><mark>Azure Blobs doesnâ€™t need to be mounted and can be accessed directly from any client that supports HTTP calls. Azure Files needs to be mounted to virtual machines before working with the data</mark>. On a side note, you can still manage the files in Azure Files via tools like the Azure portal and Azure Storage Explorer without the need to mount it.</li>
</ul>
<h3 id="azure-file-share">Azure File Share<a class="headerlink" href="#azure-file-share" title="Permanent link">&para;</a></h3>
<p>File shares are not something new; you still have on-premises file shares that serve your enterprise needs and requirements. <code>Azure File Share</code> is a cloud-based file share that enables you to access the file share from any computer anywhere in the world.</p>
<h3 id="azure-file-sync">Azure File Sync<a class="headerlink" href="#azure-file-sync" title="Permanent link">&para;</a></h3>
<p>With <strong>Azure File Sync</strong>, you will be using Azure Files as a centralized location for storing files. In simple words, you can synchronize the files you have on-premises with <code>Azure File Share</code>.</p>
<p><center> <img src="../images/fileSyncProcess.jpg" width="80%"> </center></p>
<p>An <code>Azure File Sync</code> deployment has these components:</p>
<ul>
<li><strong>Azure file share</strong>: An Azure file share is a serverless cloud file share, which provides the <code>cloud endpoint</code> of an <em>Azure File Sync relationship</em>.</li>
<li><strong>Server endpoint</strong>: The path on the <code>Windows Server</code> that is being synced to an Azure file share. This can be a specific folder on a volume or the root of the volume. <mark>Multiple server endpoints can exist on the same volume if their namespaces do not overlap (as shown in the figure)</mark></li>
<li><strong>Sync group</strong>: <em>The object that defines the sync relationship between a cloud endpoint, or Azure file share, and a server endpoint</em>. Endpoints within a sync group are kept in sync with each other. If for example, you have two distinct sets of files that you want to manage with Azure File Sync, you would create two sync groups and add different endpoints to each sync group.</li>
</ul>
<h3 id="file-share-steps">File Share steps<a class="headerlink" href="#file-share-steps" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title">Steps to synchronize the files in the file share named data to an on-premises server named Server1</p>
<ul>
<li>
<p>Step 1: <code>Install the Azure File Sync agent on Server1</code> - The Azure File Sync agent is a downloadable package that enables Windows Server to be synced with an Azure file share.</p>
</li>
<li>
<p>Step 2: <code>Register Server1</code> - Register Windows Server with Storage Sync Service. Registering your Windows Server with a Storage Sync Service establishes a trust relationship between your server and the Storage Sync Service.</p>
</li>
<li>
<p>Step 3: <code>Create a sync group and a cloud endpoint</code> - A sync group defines the sync topology for a set of files. Endpoints within a sync group are kept in sync with each other. A sync group must contain one cloud, which represents an Azure file share and one or more server endpoints. A server endpoint represents a path on registered server.</p>
</li>
</ul>
</div>
<h2 id="storage-security">Storage Security<a class="headerlink" href="#storage-security" title="Permanent link">&para;</a></h2>
<div class="admonition remember">
<p class="admonition-title">Remember</p>
<p>You can control <code>fine-grained access</code> to data objects using <em>SAS token</em> instead of using <em>access keys</em> as you can define <code>time-bound access</code>.</p>
</div>
<h3 id="authorization-options">Authorization options<a class="headerlink" href="#authorization-options" title="Permanent link">&para;</a></h3>
<p>The following are the authorization options available to Azure Storage:</p>
<ol>
<li><code>Azure AD</code>: Using Azure AD:  you can authorize access to Azure Storage via role-based access control (RBAC). With RBAC, you can assign fine-grained access to users, groups, or applications.</li>
<li><code>Shared Key</code>: Every storage account has two keys: primary and secondary. The access keys of the storage account will be used in the Authorization header of the API calls. <code>Shared Access Signatures</code> (SAS), you can limit access to services with specified permissions and over a specified timeframe.</li>
<li><code>Anonymous Access to Containers and Blobs</code>: If you set the access level to blob or container, you can have public access to the objects without the need to pass keys or grant authorization. </li>
</ol>
<h2 id="azcopy">AzCopy<a class="headerlink" href="#azcopy" title="Permanent link">&para;</a></h2>
<p><code>AzCopy</code> is a next-generation command-line tool for copying data from or to Azure Blob and Azure Files. </p>
<div class="admonition tip">
<p>Behind the scenes, Azure Storage Explorer uses <code>AzCopy</code> to accomplish all the data transfer operations. </p>
</div>
<p>With <code>AzCopy</code> you can copy data in the following scenarios: </p>
<ul>
<li>Copy data from a local machine to Azure Blobs or Azure Files </li>
<li>Copy data from Azure Blobs or Azure Files to a local machine </li>
<li>Copy data between storage accounts</li>
</ul>
<h2 id="custom-domain-configuration">Custom Domain Configuration<a class="headerlink" href="#custom-domain-configuration" title="Permanent link">&para;</a></h2>
<p>Accessing the service using the default domain may be hectic, and customers would like to use their own <code>custom domains</code> to represent their storage space.</p>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://instagram.com/amar_dhillon_studio" target="_blank" rel="noopener" title="instagram.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://www.youtube.com/channel/UCbxj-orGrUOhihmOBJzE_Fg" target="_blank" rel="noopener" title="www.youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://medium.com/@smartsplash" target="_blank" rel="noopener" title="medium.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M180.5 74.262C80.813 74.262 0 155.633 0 256s80.819 181.738 180.5 181.738S361 356.373 361 256 280.191 74.262 180.5 74.262zm288.25 10.646c-49.845 0-90.245 76.619-90.245 171.095s40.406 171.1 90.251 171.1 90.251-76.619 90.251-171.1H559c0-94.503-40.4-171.095-90.248-171.095zm139.506 17.821c-17.526 0-31.735 68.628-31.735 153.274s14.2 153.274 31.735 153.274S640 340.631 640 256c0-84.649-14.215-153.271-31.742-153.271z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://github.com/amarjitdhillon/" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://twitter.com/_adhillon_" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "content.tooltips", "navigation.indexes", "navigation.instant", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.5e67fbfe.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c44cc438.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>